(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{869:function(e,t,s){Promise.resolve().then(s.bind(s,5025))},7907:function(e,t,s){"use strict";var i=s(5313);s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}})},5025:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var i=s(3827),a=s(4090),l=s(7907);let n=()=>{let e={timerLength:60,emailsToIgnore:3};try{let t=localStorage.getItem("gameSettings");return t?JSON.parse(t):e}catch(t){return e}},o=n(),r={score:0,emails:[],ignoredEmails:[],ignoredEmailsThreshold:o.emailsToIgnore,ignoredEmailPenalty:-3,ignoredEmailReward:5,timerLength:o.timerLength,isPaused:!1,statistics:{totalEmails:0,phishingDetected:0,legitimateAllowed:0,falsePositives:0,falseNegatives:0,responseTimes:[]}};function c(e){let t=Date.now(),s=e.startTime||t;return(t-s)/1e3}function d(e,t){switch(t.type){case"ADD_EMAIL":return{...e,emails:[...e.emails,t.email],statistics:{...e.statistics,totalEmails:e.statistics.totalEmails+1}};case"REMOVE_EMAIL":return{...e,emails:e.emails.filter(e=>e.id!==t.id)};case"IGNORE_EMAIL":let s=e.emails.find(e=>e.id===t.id);if(!s)return e;let i=c(s);return{...e,emails:e.emails.filter(e=>e.id!==t.id),ignoredEmails:[...e.ignoredEmails,s],statistics:{...e.statistics,responseTimes:[...e.statistics.responseTimes,i]}};case"REPORT_EMAIL":let a=e.emails.find(e=>e.id===t.id);if(!a)return e;let l=a.isPhishing?10:-5,n=c(a);return{...e,score:e.score+l,emails:e.emails.filter(e=>e.id!==t.id),statistics:{...e.statistics,phishingDetected:a.isPhishing?e.statistics.phishingDetected+1:e.statistics.phishingDetected,falsePositives:a.isPhishing?e.statistics.falsePositives:e.statistics.falsePositives+1,responseTimes:[...e.statistics.responseTimes,n]}};case"REPORT_IGNORED_EMAIL":let o=e.ignoredEmails.find(e=>e.id===t.id);if(!o)return e;let r=o.isPhishing?e.ignoredEmailReward:-e.ignoredEmailReward;return{...e,score:e.score+r,ignoredEmails:e.ignoredEmails.filter(e=>e.id!==t.id),statistics:{...e.statistics,phishingDetected:o.isPhishing?e.statistics.phishingDetected+1:e.statistics.phishingDetected,falsePositives:o.isPhishing?e.statistics.falsePositives:e.statistics.falsePositives+1}};case"ALLOW_EMAIL":let d=e.emails.find(e=>e.id===t.id);if(!d)return e;let m=d.isPhishing?-10:5,u=c(d);return{...e,score:e.score+m,emails:e.emails.filter(e=>e.id!==t.id),statistics:{...e.statistics,legitimateAllowed:d.isPhishing?e.statistics.legitimateAllowed:e.statistics.legitimateAllowed+1,falseNegatives:d.isPhishing?e.statistics.falseNegatives+1:e.statistics.falseNegatives,responseTimes:[...e.statistics.responseTimes,u]}};case"ALLOW_IGNORED_EMAIL":let g=e.ignoredEmails.find(e=>e.id===t.id);if(!g)return e;let h=g.isPhishing?-e.ignoredEmailReward:e.ignoredEmailReward;return{...e,score:e.score+h,ignoredEmails:e.ignoredEmails.filter(e=>e.id!==t.id),statistics:{...e.statistics,legitimateAllowed:g.isPhishing?e.statistics.legitimateAllowed:e.statistics.legitimateAllowed+1,falseNegatives:g.isPhishing?e.statistics.falseNegatives+1:e.statistics.falseNegatives}};case"MOVE_TO_CURRENT":let p=e.ignoredEmails.find(e=>e.id===t.id);if(!p)return e;return{...e,emails:[...e.emails,p],ignoredEmails:e.ignoredEmails.filter(e=>e.id!==t.id)};case"UPDATE_SCORE":{let s=Math.max(0,e.score+t.points);return{...e,score:s}}case"TOGGLE_PAUSE":return{...e,isPaused:!e.isPaused,emails:e.emails.map(e=>({...e,timeLimit:e.timeLimit}))};case"TICK":return{...e,emails:e.emails.map(e=>({...e,timeLimit:e.timeLimit-1}))};case"UPDATE_SETTINGS":return{...e,timerLength:t.settings.timerLength,ignoredEmailsThreshold:t.settings.emailsToIgnore};case"FALSE_NEGATIVE_EMAIL":{let s=e.emails.find(e=>e.id===t.id);if(!s)return e;let i=c(s),a=e.emails.filter(e=>e.id!==t.id);return{...e,emails:a,score:e.score-10,statistics:{...e.statistics,falseNegatives:e.statistics.falseNegatives+1,responseTimes:[...e.statistics.responseTimes,i]}}}case"FALSE_NEGATIVE_IGNORED_EMAIL":{let s=e.ignoredEmails.find(e=>e.id===t.id);if(!s)return e;let i=c(s),a=e.ignoredEmails.filter(e=>e.id!==t.id);return{...e,ignoredEmails:a,score:e.score-10,statistics:{...e.statistics,falseNegatives:e.statistics.falseNegatives+1,responseTimes:[...e.statistics.responseTimes,i]}}}case"DOWNLOAD_EMAIL":{let s=e.emails.find(e=>e.id===t.id);if(!s)return e;let i=c(s),a=e.emails.filter(e=>e.id!==t.id);if(s.isPhishing)return{...e,emails:a,statistics:{...e.statistics,falseNegatives:e.statistics.falseNegatives+1,responseTimes:[...e.statistics.responseTimes,i]}};return{...e,emails:a,score:e.score+5,statistics:{...e.statistics,legitimateAllowed:e.statistics.legitimateAllowed+1,responseTimes:[...e.statistics.responseTimes,i]}}}case"DOWNLOAD_IGNORED_EMAIL":{let s=e.ignoredEmails.find(e=>e.id===t.id);if(!s)return e;let i=c(s),a=e.ignoredEmails.filter(e=>e.id!==t.id);if(s.isPhishing)return{...e,ignoredEmails:a,statistics:{...e.statistics,falseNegatives:e.statistics.falseNegatives+1,responseTimes:[...e.statistics.responseTimes,i]}};return{...e,ignoredEmails:a,score:e.score+5,statistics:{...e.statistics,legitimateAllowed:e.statistics.legitimateAllowed+1,responseTimes:[...e.statistics.responseTimes,i]}}}case"COMPLETE_SURVEY_EMAIL":{let s=e.emails.find(e=>e.id===t.id);if(!s)return e;let i=c(s),a=e.emails.filter(e=>e.id!==t.id),l=Math.max(0,s.isPhishing?e.score-30:e.score+5);return{...e,emails:a,score:l,statistics:{...e.statistics,falseNegatives:s.isPhishing?e.statistics.falseNegatives+1:e.statistics.falseNegatives,legitimateAllowed:s.isPhishing?e.statistics.legitimateAllowed:e.statistics.legitimateAllowed+1,responseTimes:[...e.statistics.responseTimes,i]}}}case"COMPLETE_SURVEY_IGNORED_EMAIL":{let s=e.ignoredEmails.find(e=>e.id===t.id);if(!s)return e;let i=c(s),a=e.ignoredEmails.filter(e=>e.id!==t.id),l=Math.max(0,s.isPhishing?e.score-30:e.score+5);return{...e,ignoredEmails:a,score:l,statistics:{...e.statistics,falseNegatives:s.isPhishing?e.statistics.falseNegatives+1:e.statistics.falseNegatives,legitimateAllowed:s.isPhishing?e.statistics.legitimateAllowed:e.statistics.legitimateAllowed+1,responseTimes:[...e.statistics.responseTimes,i]}}}default:return e}}let m=["google.com","microsoft.com","apple.com","amazon.com","facebook.com","paypal.com","dropbox.com","adobe.com","slack.com","zoom.us","surveymonkey.com","qualtrics.com"],u=["g00gle.com","micros0ft.com","apple-support.net","amaz0n-security.com","faceb00k-login.com","paypa1.com","dr0pbox.com","ad0be.net","slack-update.com","zoom-meeting.net","opinion-survey.net","survey-rewards.com"],g=[{subject:"Security Alert",content:"We detected unusual activity on your account. Please verify your identity by logging in.",type:"login"},{subject:"Account Verification Required",content:"Your account needs to be verified. Please log in to continue using our services.",type:"login"},{subject:"Password Reset",content:"A password reset was requested for your account. Click below to log in and change your password.",type:"login"},{subject:"Unusual Activity Detected",content:"We noticed some unusual activity on your account. Please log in to confirm your recent actions.",type:"login"},{subject:"Update Your Information",content:"Your account information needs to be updated. Please log in to verify your details.",type:"login"},{subject:"Your invoice is ready",content:"Your monthly invoice has been generated and is ready for download.",type:"download"},{subject:"Invoice #INV-2024-001",content:"Please find attached your invoice for recent services. Click the download button to access it.",type:"download"},{subject:"Document shared with you",content:"A new document has been shared with you. Click download to view the shared file.",type:"download"},{subject:"Your receipt from recent purchase",content:"Thank you for your purchase. Your receipt is ready for download.",type:"download"},{subject:"Contract for review",content:"Please review the attached contract document. Use the download button to access it.",type:"download"},{subject:"Important: Tax document available",content:"Your tax document for 2024 is now available. Please download for your records.",type:"download"},{subject:"Payslip ready for download",content:"Your monthly payslip has been generated and is ready for download.",type:"download"},{subject:"We'd love your feedback!",content:"Dear user,\nPlease take a moment to complete our short survey.",type:"survey"},{subject:"Quick survey - Get a $50 reward!",content:"Complete our 2-minute survey and receive a $50 gift card as a thank you.",type:"survey"},{subject:"Your opinion matters",content:"Help us improve our services by completing a brief satisfaction survey.",type:"survey"},{subject:"Feedback requested - Win prizes!",content:"Share your thoughts in our survey and enter to win amazing prizes.",type:"survey"}];function h(e){return e[Math.floor(Math.random()*e.length)]}function p(e){let{onSubmit:t,onReport:s}=e;return(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t({username:"demo@example.com",password:"demopassword123"})},className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-400 mb-2",children:"Email"}),(0,i.jsx)("input",{type:"email",value:"demo@example.com",disabled:!0,className:"w-full bg-gray-700 text-gray-300 px-4 py-2 rounded cursor-not-allowed"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-400 mb-2",children:"Password"}),(0,i.jsx)("input",{type:"password",value:"demopassword123",disabled:!0,className:"w-full bg-gray-700 text-gray-300 px-4 py-2 rounded cursor-not-allowed"})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)("button",{type:"submit",className:"flex-1 bg-[#64FFDA] text-[#0A192F] py-2 rounded shadow-md hover:bg-[#52E9C2] transition",children:"LOGIN"}),(0,i.jsx)("button",{type:"button",onClick:s,className:"flex-1 bg-[#FF3366] text-[#0A192F] py-2 rounded shadow-md hover:bg-[#E52A59] transition",children:"REPORT"})]})]})}function f(e){let{onSubmit:t,onReport:s}=e;return(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t()},className:"space-y-6",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-400 mb-2",children:"Your full name"}),(0,i.jsx)("input",{type:"text",value:"John Smith",disabled:!0,className:"w-full bg-gray-700 text-gray-300 px-4 py-2 rounded cursor-not-allowed"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-400 mb-2",children:"Your email address"}),(0,i.jsx)("input",{type:"email",value:"demo@example.com",disabled:!0,className:"w-full bg-gray-700 text-gray-300 px-4 py-2 rounded cursor-not-allowed"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-400 mb-2",children:"Do you use antivirus software?"}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsxs)("label",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"radio",name:"antivirus",checked:!0,disabled:!0,className:"mr-2 cursor-not-allowed"}),(0,i.jsx)("span",{className:"text-gray-300",children:"Yes"})]}),(0,i.jsxs)("label",{className:"flex items-center",children:[(0,i.jsx)("input",{type:"radio",name:"antivirus",disabled:!0,className:"mr-2 cursor-not-allowed"}),(0,i.jsx)("span",{className:"text-gray-300",children:"No"})]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{className:"block text-gray-400 mb-2",children:"How often do you check your spam folder?"}),(0,i.jsxs)("select",{disabled:!0,value:"weekly",className:"w-full bg-gray-700 text-gray-300 px-4 py-2 rounded cursor-not-allowed",children:[(0,i.jsx)("option",{value:"daily",children:"Daily"}),(0,i.jsx)("option",{value:"weekly",children:"Weekly"}),(0,i.jsx)("option",{value:"monthly",children:"Monthly"}),(0,i.jsx)("option",{value:"never",children:"Never"})]})]}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)("button",{type:"submit",className:"flex-1 bg-[#64FFDA] text-[#0A192F] py-2 rounded shadow-md hover:bg-[#52E9C2] transition",children:"SUBMIT"}),(0,i.jsx)("button",{type:"button",onClick:s,className:"flex-1 bg-[#FF3366] text-[#0A192F] py-2 rounded shadow-md hover:bg-[#E52A59] transition",children:"REPORT"})]})]})}var v=s(9585);function x(){let e=(0,l.useRouter)(),[t,s]=(0,a.useReducer)(d,r),[o,c]=(0,a.useState)(!1),[x,y]=(0,a.useState)(!1),[b,E]=(0,a.useState)(null),[w,N]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=n();s({type:"UPDATE_SETTINGS",settings:{timerLength:e.timerLength,emailsToIgnore:e.emailsToIgnore}});let t=e=>{if("gameSettings"===e.key){let e=n();s({type:"UPDATE_SETTINGS",settings:{timerLength:e.timerLength,emailsToIgnore:e.emailsToIgnore}})}};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]),(0,a.useEffect)(()=>{let e=setInterval(()=>{let e=n();s({type:"UPDATE_SETTINGS",settings:{timerLength:e.timerLength,emailsToIgnore:e.emailsToIgnore}})},1e3);return()=>clearInterval(e)},[]);let A=(0,a.useCallback)(async e=>{let s=t.statistics.responseTimes.length>0?t.statistics.responseTimes.reduce((e,t)=>e+t,0)/t.statistics.responseTimes.length:0,i={score:Math.max(0,t.score),totalEmails:t.statistics.totalEmails,phishingDetected:t.statistics.phishingDetected,legitimateAllowed:t.statistics.legitimateAllowed,falsePositives:t.statistics.falsePositives,falseNegatives:t.statistics.falseNegatives,avgResponseTime:s,endReason:e};await (0,v.hC)(i)},[t.score,t.statistics]);(0,a.useEffect)(()=>{(async()=>{t.score<0&&!t.statistics.falseNegatives&&(await A("game_over"),e.push("/game-over"))})()},[t.score,e,A,t.statistics.falseNegatives]),(0,a.useEffect)(()=>{let e=setInterval(()=>{t.isPaused||(s({type:"TICK"}),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;if(e.length>=t)return!1;let i=e[e.length-1];return!i||Date.now()-i.startTime>=s}(t.emails,5)&&s({type:"ADD_EMAIL",email:function(){let e=.5>Math.random(),t=e?h(u):h(m),s=h(g),i=(()=>{try{let e=localStorage.getItem("gameSettings");return e?JSON.parse(e):{timerLength:60}}catch(e){return{timerLength:60}}})(),a="download"===s.type?"billing@".concat(t):"security@".concat(t);return{id:Math.random().toString(36).substring(2,15),subject:s.subject,sender:a,content:s.content,isPhishing:e,timeLimit:i.timerLength,startTime:Date.now(),type:s.type}}()}),t.emails.forEach(e=>{e.timeLimit<=0&&(s({type:"REMOVE_EMAIL",id:e.id}),s({type:"UPDATE_SCORE",points:-3}))}))},1e3);return()=>clearInterval(e)},[t.isPaused,t.emails]);let j=(0,a.useCallback)(e=>{new Audio(e.isPhishing?"/sounds/success.mp3":"/sounds/error.mp3").play().catch(e=>console.error("Sound error:",e)),o&&(c(!1),E(null)),w?(s({type:"REPORT_IGNORED_EMAIL",id:e.id}),N(null)):s({type:"REPORT_EMAIL",id:e.id}),E(null)},[o,w]),T=(0,a.useCallback)(e=>{c(!0),E(e)},[]),D=(0,a.useCallback)(e=>{s({type:"IGNORE_EMAIL",id:e.id}),E(null)},[]);(0,a.useCallback)(e=>{s({type:"REPORT_IGNORED_EMAIL",id:e.id})},[]),(0,a.useCallback)(e=>{c(!0),E(e),N(e)},[]);let P=(0,a.useCallback)(()=>{A("user_ended").then(()=>{e.push("/game-over")})},[e,A]),L=(0,a.useCallback)(e=>{E(e),N(e)},[]),R=(0,a.useCallback)(i=>{let{username:a,password:l}=i;b&&(b.isPhishing?(new Audio("/sounds/error.mp3").play(),w?s({type:"FALSE_NEGATIVE_IGNORED_EMAIL",id:b.id}):s({type:"FALSE_NEGATIVE_EMAIL",id:b.id}),N(null),c(!1),E(null),setTimeout(()=>{let s={...t.statistics,score:t.score,totalEmails:t.statistics.totalEmails,phishingDetected:t.statistics.phishingDetected,legitimateAllowed:t.statistics.legitimateAllowed,falsePositives:t.statistics.falsePositives,falseNegatives:t.statistics.falseNegatives+1,avgResponseTime:t.statistics.responseTimes.length>0?t.statistics.responseTimes.reduce((e,t)=>e+t,0)/t.statistics.responseTimes.length:0,endReason:"phishing_credentials"};(0,v.hC)(s).then(()=>{e.push("/game-over")})},0)):(new Audio("/sounds/success.mp3").play(),w?(s({type:"ALLOW_IGNORED_EMAIL",id:b.id}),N(null)):s({type:"ALLOW_EMAIL",id:b.id}),c(!1),E(null)))},[b,e,w,A,s,t.score,t.statistics]),I=(0,a.useCallback)(i=>{if(new Audio(i.isPhishing?"/sounds/error.mp3":"/sounds/success.mp3").play().catch(e=>console.error("Sound error:",e)),i.isPhishing){w?s({type:"DOWNLOAD_IGNORED_EMAIL",id:i.id}):s({type:"DOWNLOAD_EMAIL",id:i.id}),N(null),E(null);let a={...t.statistics,score:t.score,totalEmails:t.statistics.totalEmails,phishingDetected:t.statistics.phishingDetected,legitimateAllowed:t.statistics.legitimateAllowed,falsePositives:t.statistics.falsePositives,falseNegatives:t.statistics.falseNegatives+1,avgResponseTime:t.statistics.responseTimes.length>0?t.statistics.responseTimes.reduce((e,t)=>e+t,0)/t.statistics.responseTimes.length:0,endReason:"phishing_download"};(0,v.hC)(a).then(()=>{e.push("/game-over")})}else w?s({type:"DOWNLOAD_IGNORED_EMAIL",id:i.id}):s({type:"DOWNLOAD_EMAIL",id:i.id}),N(null),E(null),s({type:"UPDATE_SCORE",points:5})},[w,s,e,v.hC,t.score,t.statistics]),_=(0,a.useCallback)(e=>{y(!0),E(e)},[]);return(0,i.jsxs)("div",{className:"min-h-screen bg-[#0A192F] font-mono text-[#64FFDA] p-8",children:[(0,i.jsxs)("div",{className:"relative flex flex-col items-center",children:[(0,i.jsx)("button",{onClick:()=>s({type:"TOGGLE_PAUSE"}),className:"bg-[#FF3366] rounded p-4 mb-12  hover:bg-[#E52A59] transition",children:t.isPaused?"▶":"⏸"}),(0,i.jsx)("h1",{className:"text-[48px] font-extrabold mb-2",children:"AuthenticatePlease"}),(0,i.jsx)("h2",{className:"text-[#FF3366] text-[24px] font-MEDIUM mb-8",children:"Phishing OR not?? Decide."}),(0,i.jsxs)("div",{className:"absolute top-0 right-0 text-white text-lg p-4",children:["SCORE: ",t.score]})]}),(0,i.jsx)("div",{className:"bg-[#0B1120] border-4 border-[#112240] shadow-heavy rounded-sm w-full max-w-6xl mx-auto p-6",children:(0,i.jsxs)("div",{className:"md:flex md:gap-6",children:[(0,i.jsxs)("div",{className:"md:w-1/3 md:border-r md:border-[#112240] pr-4",children:[(0,i.jsx)("h2",{className:"text-2xl text-center font-extrabold mb-4 uppercase",children:"Active Emails"}),(0,i.jsx)("div",{className:"max-h-[60vh] overflow-y-auto scrollbar-hide space-y-4",children:t.emails.map(e=>(0,i.jsxs)("div",{onClick:()=>E(e),className:"p-4 rounded cursor-pointer hover:bg-[#112640] transition ".concat((null==b?void 0:b.id)===e.id?"ring-2 ring-[#64FFDA]":""),children:[(0,i.jsx)("div",{className:"font-bold mb-1",children:e.subject}),(0,i.jsxs)("div",{className:"text-[#767676] text-sm mb-1",children:["From: ",e.sender]}),(0,i.jsxs)("div",{className:"text-[#64FFDA] text-xs bg-[#112640] inline-block px-2 py-1 rounded",children:[e.timeLimit,"s"]})]},e.id))})]}),(0,i.jsx)("div",{className:"md:w-1/3 md:border-r md:border-[#112240] px-4",children:o&&b?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"flex justify-center mb-8",children:(0,i.jsx)("div",{className:"text-[48px]",children:"\uD83D\uDD12"})}),(0,i.jsx)("h2",{className:"text-2xl font-extrabold text-center mb-8",children:"LOGIN"}),(0,i.jsx)(p,{onSubmit:R,onReport:()=>j(b)})]}):x&&b?(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"flex justify-center mb-8",children:(0,i.jsx)("div",{className:"text-[48px]",children:"\uD83D\uDCCB"})}),(0,i.jsx)("h2",{className:"text-2xl font-extrabold text-center mb-8",children:"SURVEY"}),(0,i.jsx)(f,{onSubmit:()=>{if((null==b?void 0:b.isPhishing)?new Audio("/sounds/error.mp3").play().catch(e=>console.error(e)):new Audio("/sounds/success.mp3").play().catch(e=>console.error(e)),w?s({type:"COMPLETE_SURVEY_IGNORED_EMAIL",id:b.id}):s({type:"COMPLETE_SURVEY_EMAIL",id:b.id}),N(null),y(!1),E(null),(null==b?void 0:b.isPhishing)&&t.score-30<0){let s={...t.statistics,score:Math.max(0,t.score-30),totalEmails:t.statistics.totalEmails,phishingDetected:t.statistics.phishingDetected,legitimateAllowed:t.statistics.legitimateAllowed,falsePositives:t.statistics.falsePositives,falseNegatives:t.statistics.falseNegatives+1,avgResponseTime:t.statistics.responseTimes.length>0?t.statistics.responseTimes.reduce((e,t)=>e+t,0)/t.statistics.responseTimes.length:0,endReason:"game_over"};(0,v.hC)(s).then(()=>{e.push("/game-over")})}},onReport:()=>{j(b),y(!1)}})]}):b?(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{className:"text-2xl font-extrabold mb-4",children:b.subject}),(0,i.jsxs)("p",{className:"text-[#767676] text-sm mb-4",children:["From: ",b.sender]}),b.content&&(0,i.jsx)("p",{className:"mb-6",children:b.content}),(0,i.jsxs)("div",{className:"flex gap-4",children:["download"===b.type?(0,i.jsx)("button",{onClick:()=>I(b),className:"flex-1 bg-[#64FFDA] text-[#0A192F] py-2 rounded shadow-md hover:bg-[#52E9C2] transition",children:"DOWNLOAD"}):"survey"===b.type?(0,i.jsx)("button",{onClick:()=>_(b),className:"flex-1 bg-[#64FFDA] text-[#0A192F] py-2 rounded shadow-md hover:bg-[#52E9C2] transition",children:"COMPLETE"}):(0,i.jsx)("button",{onClick:()=>T(b),className:"flex-1 bg-[#64FFDA] text-[#0A192F] py-2 rounded shadow-md hover:bg-[#52E9C2] transition",children:"ALLOW"}),(0,i.jsx)("button",{onClick:()=>j(b),className:"flex-1 bg-[#FF3366] text-[#0A192F] py-2 rounded shadow-md hover:bg-[#E52A59] transition",children:"REPORT"}),!w&&(0,i.jsx)("button",{onClick:()=>D(b),className:"flex-1 py-2 rounded transition ".concat(t.ignoredEmails.length>=t.ignoredEmailsThreshold?"bg-[#112240] text-[#767676] cursor-not-allowed":"bg-[#FF3366] text-[#0A192F] hover:bg-[#E52A59]"),disabled:t.ignoredEmails.length>=t.ignoredEmailsThreshold,children:"IGNORE"})]})]}):(0,i.jsx)("div",{className:"flex items-center justify-center h-full text-[#767676]",children:"Select an email to review"})}),(0,i.jsxs)("div",{className:"md:w-1/3 pl-4",children:[(0,i.jsx)("h2",{className:"text-2xl text-[#FF3366] text-center font-extrabold mb-4 uppercase",children:"Ignored Emails"}),(0,i.jsx)("div",{className:"max-h-[60vh] overflow-y-auto scrollbar-hide space-y-4",children:t.ignoredEmails.map(e=>(0,i.jsxs)("div",{onClick:()=>L(e),className:"p-4 rounded cursor-pointer hover:bg-[#112640] transition ".concat((null==w?void 0:w.id)===e.id?"ring-2 ring-[#FF3366]":""),children:[(0,i.jsx)("div",{className:"font-bold mb-1",children:e.subject}),(0,i.jsxs)("div",{className:"text-[#767676] text-sm",children:["From: ",e.sender]})]},e.id))})]})]})}),t.isPaused&&(0,i.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-40",onClick:e=>e.stopPropagation(),children:(0,i.jsxs)("div",{className:"text-center bg-[#0B1120] p-8 rounded-lg shadow-heavy",onClick:e=>e.stopPropagation(),children:[(0,i.jsx)("div",{className:"text-xl text-[#64FFDA] mb-4",children:"Game Paused"}),(0,i.jsxs)("div",{className:"flex gap-4",children:[(0,i.jsx)("button",{type:"button",onClick:()=>s({type:"TOGGLE_PAUSE"}),className:"bg-[#64FFDA] text-[#0A192F] px-8 py-3 rounded shadow-md hover:bg-[#52E9C2] transition font-bold",children:"Resume"}),(0,i.jsx)("button",{type:"button",onClick:P,className:"bg-[#FF3366] text-white px-8 py-3 rounded shadow-md hover:bg-[#E52A59] transition",children:"End Game"})]})]})})]})}},9585:function(e,t,s){"use strict";s.d(t,{EJ:function(){return m},G8:function(){return d},Io:function(){return u},MA:function(){return h},Ti:function(){return r},hC:function(){return o},sE:function(){return g}});let i="lastGameStats",a="allTimeStats";async function l(){try{var e;let t=await fetch("/api/auth/user");if(!t.ok)return null;let s=await t.json();return(null===(e=s.user)||void 0===e?void 0:e.id)||null}catch(e){return null}}async function n(e){let t=await l();return t?"".concat(e,"_").concat(t):e}async function o(e){let t=await n(i);localStorage.setItem(t,JSON.stringify(e)),await c(e)}async function r(){let e=await n(i),t=localStorage.getItem(e);return t?JSON.parse(t):null}async function c(e){let t=await d(),s={totalGames:t.totalGames+1,falsePositives:t.falsePositives+e.falsePositives,falseNegatives:t.falseNegatives+e.falseNegatives,totalReported:t.totalReported+e.phishingDetected+e.falsePositives,totalResponseTime:t.totalResponseTime+e.avgResponseTime*e.totalEmails,totalDecisions:t.totalDecisions+e.totalEmails,phishingDetected:t.phishingDetected+e.phishingDetected,legitimateAllowed:t.legitimateAllowed+e.legitimateAllowed},i=await n(a);localStorage.setItem(i,JSON.stringify(s))}async function d(){let e=await n(a),t=localStorage.getItem(e);return t?JSON.parse(t):{totalGames:0,falsePositives:0,falseNegatives:0,totalReported:0,totalResponseTime:0,totalDecisions:0,phishingDetected:0,legitimateAllowed:0}}function m(e){if("totalEmails"in e){let t=e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives;if(0===t)return"0%";let s=e.phishingDetected+e.legitimateAllowed;return"".concat((s/t*100).toFixed(1),"%")}{let t=e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives;if(0===t)return"0%";let s=e.phishingDetected+e.legitimateAllowed;return"".concat((s/t*100).toFixed(1),"%")}}function u(e){return"avgResponseTime"in e?"".concat(e.avgResponseTime.toFixed(1),"s"):0===e.totalDecisions?"0.0s":"".concat((e.totalResponseTime/e.totalDecisions).toFixed(1),"s")}async function g(){let e=await n(i),t=await n(a);localStorage.removeItem(e),localStorage.removeItem(t)}async function h(e){let t=await l(),s=t?"_".concat(t):"",i=(e,t)=>{let s=new Blob([e],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");if(void 0!==i.download){let e=URL.createObjectURL(s);i.setAttribute("href",e),i.setAttribute("download",t),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},a=e=>{if(null==e)return"";let t=String(e);return t.includes(",")?'"'.concat(t,'"'):t};if("all-time"===e){let e=await d();i(["Total Games,False Positives,Total Reported,Phishing Detected,Legitimate Allowed,Average Response Time (s),Accuracy (%)",[e.totalGames,e.falsePositives,e.totalReported,e.phishingDetected,e.legitimateAllowed,(e.totalResponseTime/e.totalDecisions).toFixed(1),((e.phishingDetected+e.legitimateAllowed)/e.totalDecisions*100).toFixed(1)].map(a).join(",")].join("\n"),"authenticate_please_all_time".concat(s,".csv"))}else{let e=await r();e&&i(["Score,Total Emails,Phishing Detected,Legitimate Allowed,False Positives,False Negatives,Average Response Time (s),Accuracy (%),End Reason",[e.score,e.totalEmails,e.phishingDetected,e.legitimateAllowed,e.falsePositives,e.falseNegatives,e.avgResponseTime.toFixed(1),((e.phishingDetected+e.legitimateAllowed)/(e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives)*100).toFixed(1),e.endReason.replace(/_/g," ").toUpperCase()].map(a).join(",")].join("\n"),"authenticate_please_last_game".concat(s,".csv"))}}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=869)}),_N_E=e.O()}]);