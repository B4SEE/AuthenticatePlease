(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3718:function(e,t,s){Promise.resolve().then(s.bind(s,7458))},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return a.a}});var i=s(5250),a=s.n(i)},7907:function(e,t,s){"use strict";var i=s(5313);s.o(i,"useRouter")&&s.d(t,{useRouter:function(){return i.useRouter}})},7458:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var i=s(3827),a=s(4090),l=s(8792),n=s(7907),o=s(9585);function r(e){let{data:t,barHeight:s=37,barGap:l=12}=e,[n,o]=(0,a.useState)(null),[r,c]=(0,a.useState)(!1),d=t.length?Math.max(...t):1,u=t.length*s+(t.length-1)*l;return(0,a.useEffect)(()=>{requestAnimationFrame(()=>c(!0))},[]),(0,i.jsxs)("svg",{width:"100%",height:u,viewBox:"0 0 100 ".concat(u),xmlns:"http://www.w3.org/2000/svg",children:[(0,i.jsx)("rect",{x:0,y:0,width:"100%",height:u,fill:"transparent"}),t.map((e,t)=>{let a=r?e/d*100:0,c=t*(s+l),u=0===t?"#FF3366":"#5FFBF1";return(0,i.jsxs)("g",{children:[(0,i.jsx)("rect",{x:0,y:c,width:"".concat(isNaN(a)?0:a,"%"),height:s,fill:u,rx:8,style:{transition:"width 0.8s ease-out",cursor:"pointer"},onMouseEnter:()=>o(t),onMouseLeave:()=>o(null)}),n===t&&(0,i.jsx)("text",{x:"".concat(a+1,"%"),y:c+s/2,fill:"#FFFFFF",fontSize:.5*s,fontFamily:"JetBrains Mono, monospace",alignmentBaseline:"middle",textAnchor:"start",children:e})]},t)})]})}function c(){let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(""),[c,d]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/auth/user"),t=await e.json();if(!e.ok)throw Error("Not authenticated");s(t.user.username)}catch(t){e.push("/")}})()},[e]),(0,a.useEffect)(()=>{(async()=>{d(await (0,o.Ti)())})()},[]);let u=async()=>{try{await fetch("/api/auth/logout",{method:"POST"}),e.push("/")}catch(e){console.error("Logout failed:",e)}},h=c?c.falsePositives+c.falseNegatives:0,f=c?c.phishingDetected+c.legitimateAllowed:0;return(0,i.jsxs)("div",{className:"min-h-screen bg-[#0B1120] flex flex-col items-center justify-center p-4 font-mono",children:[(0,i.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-4",children:[(0,i.jsxs)("span",{className:"text-[#5FFBF1]",children:["Welcome, ",t,"!"]}),(0,i.jsx)("button",{onClick:u,className:"text-[#FF3366] hover:text-[#FF5476]",children:"Logout"})]}),(0,i.jsxs)("div",{className:"text-center mb-12",children:[(0,i.jsx)("h1",{className:"text-[#64FFDA] text-5xl mb-2",children:"AuthenticatePlease"}),(0,i.jsx)("p",{className:"text-[#FF3366] text-xl",children:"Train to detect phishing"})]}),(0,i.jsxs)("div",{className:"flex flex-wrap justify-center gap-6 mb-12",children:[(0,i.jsx)(l.default,{href:"/game",className:"w-48",children:(0,i.jsx)("div",{className:"w-full bg-[#64FFDA] text-[#0A192F] font-extrabold shadow-md py-3 px-6 rounded text-lg hover:bg-[#FF4365] hover:text-white transition-colors cursor-pointer flex items-center justify-center",children:"START GAME"})}),(0,i.jsx)(l.default,{href:"/statistics",className:"w-48",children:(0,i.jsx)("div",{className:"w-full bg-[#64FFDA] text-[#0A192F] font-extrabold shadow-md py-3 px-6 rounded text-lg hover:bg-[#FF4365] hover:text-white transition-colors cursor-pointer flex items-center justify-center",children:"STATISTICS"})}),(0,i.jsx)(l.default,{href:"/tutorial",className:"w-48",children:(0,i.jsx)("div",{className:"w-full bg-[#64FFDA] text-[#0A192F] font-extrabold shadow-md py-3 px-6 rounded text-lg hover:bg-[#FF4365] hover:text-white transition-colors cursor-pointer flex items-center justify-center",children:"TUTORIAL"})}),(0,i.jsx)(l.default,{href:"/settings",className:"w-48",children:(0,i.jsx)("div",{className:"w-full bg-[#64FFDA] text-[#0A192F] font-extrabold shadow-md py-3 px-6 rounded text-lg hover:bg-[#FF4365] hover:text-white transition-colors cursor-pointer flex items-center justify-center",children:"SETTINGS"})}),(0,i.jsx)(l.default,{href:"/feedback",className:"w-48",children:(0,i.jsx)("div",{className:"w-full bg-[#64FFDA] text-[#0A192F] font-extrabold shadow-md py-3 px-6 rounded text-lg hover:bg-[#FF4365] hover:text-white transition-colors cursor-pointer flex items-center justify-center",children:"FEEDBACK"})})]}),(0,i.jsx)("div",{className:"bg-[#0B1120] border-4 border-[#112240] rounded-lg w-full max-w-md shadow-heavy",children:(0,i.jsxs)("div",{className:"py-6",children:[(0,i.jsxs)("h2",{className:"text-[#64FFDA] text-2xl font-bold mb-4 text-center",children:["YOUR LAST SCORE:"," ",(0,i.jsx)("span",{className:"text-[#FF3366]",children:c?c.score:0})]}),(0,i.jsxs)("div",{className:"flex justify-between mb-6 px-6",children:[(0,i.jsxs)("span",{className:"text-[#FF3366] text-lg font-medium",children:["Missed:"," ",c?c.falsePositives+c.falseNegatives:0]}),(0,i.jsxs)("span",{className:"text-[#5FFBF1] text-lg font-medium",children:["Correct:"," ",c?c.phishingDetected+c.legitimateAllowed:0]})]}),(0,i.jsx)("div",{className:"w-full  ",children:(0,i.jsx)(r,{data:[h,f],barHeight:52,barGap:24})})]})})]})}},9585:function(e,t,s){"use strict";s.d(t,{EJ:function(){return u},G8:function(){return d},Io:function(){return h},MA:function(){return m},Ti:function(){return r},hC:function(){return o},sE:function(){return f}});let i="lastGameStats",a="allTimeStats";async function l(){try{var e;let t=await fetch("/api/auth/user");if(!t.ok)return null;let s=await t.json();return(null===(e=s.user)||void 0===e?void 0:e.id)||null}catch(e){return null}}async function n(e){let t=await l();return t?"".concat(e,"_").concat(t):e}async function o(e){let t=await n(i);localStorage.setItem(t,JSON.stringify(e)),await c(e)}async function r(){let e=await n(i),t=localStorage.getItem(e);return t?JSON.parse(t):null}async function c(e){let t=await d(),s={totalGames:t.totalGames+1,falsePositives:t.falsePositives+e.falsePositives,falseNegatives:t.falseNegatives+e.falseNegatives,totalReported:t.totalReported+e.phishingDetected+e.falsePositives,totalResponseTime:t.totalResponseTime+e.avgResponseTime*e.totalEmails,totalDecisions:t.totalDecisions+e.totalEmails,phishingDetected:t.phishingDetected+e.phishingDetected,legitimateAllowed:t.legitimateAllowed+e.legitimateAllowed},i=await n(a);localStorage.setItem(i,JSON.stringify(s))}async function d(){let e=await n(a),t=localStorage.getItem(e);return t?JSON.parse(t):{totalGames:0,falsePositives:0,falseNegatives:0,totalReported:0,totalResponseTime:0,totalDecisions:0,phishingDetected:0,legitimateAllowed:0}}function u(e){if("totalEmails"in e){let t=e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives;if(0===t)return"0%";let s=e.phishingDetected+e.legitimateAllowed;return"".concat((s/t*100).toFixed(1),"%")}{let t=e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives;if(0===t)return"0%";let s=e.phishingDetected+e.legitimateAllowed;return"".concat((s/t*100).toFixed(1),"%")}}function h(e){return"avgResponseTime"in e?"".concat(e.avgResponseTime.toFixed(1),"s"):0===e.totalDecisions?"0.0s":"".concat((e.totalResponseTime/e.totalDecisions).toFixed(1),"s")}async function f(){let e=await n(i),t=await n(a);localStorage.removeItem(e),localStorage.removeItem(t)}async function m(e){let t=await l(),s=t?"_".concat(t):"",i=(e,t)=>{let s=new Blob([e],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");if(void 0!==i.download){let e=URL.createObjectURL(s);i.setAttribute("href",e),i.setAttribute("download",t),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)}},a=e=>{if(null==e)return"";let t=String(e);return t.includes(",")?'"'.concat(t,'"'):t};if("all-time"===e){let e=await d();i(["Total Games,False Positives,Total Reported,Phishing Detected,Legitimate Allowed,Average Response Time (s),Accuracy (%)",[e.totalGames,e.falsePositives,e.totalReported,e.phishingDetected,e.legitimateAllowed,(e.totalResponseTime/e.totalDecisions).toFixed(1),((e.phishingDetected+e.legitimateAllowed)/e.totalDecisions*100).toFixed(1)].map(a).join(",")].join("\n"),"authenticate_please_all_time".concat(s,".csv"))}else{let e=await r();e&&i(["Score,Total Emails,Phishing Detected,Legitimate Allowed,False Positives,False Negatives,Average Response Time (s),Accuracy (%),End Reason",[e.score,e.totalEmails,e.phishingDetected,e.legitimateAllowed,e.falsePositives,e.falseNegatives,e.avgResponseTime.toFixed(1),((e.phishingDetected+e.legitimateAllowed)/(e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives)*100).toFixed(1),e.endReason.replace(/_/g," ").toUpperCase()].map(a).join(",")].join("\n"),"authenticate_please_last_game".concat(s,".csv"))}}}},function(e){e.O(0,[250,971,69,744],function(){return e(e.s=3718)}),_N_E=e.O()}]);