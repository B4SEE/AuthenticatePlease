(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[586],{3568:function(e,t,i){Promise.resolve().then(i.bind(i,8755))},8792:function(e,t,i){"use strict";i.d(t,{default:function(){return a.a}});var s=i(5250),a=i.n(s)},8755:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return o}});var s=i(3827),a=i(4090),l=i(8792),n=i(9585);function o(){let[e,t]=(0,a.useState)(null);return((0,a.useEffect)(()=>{(async()=>{let e=await (0,n.Ti)();e&&t(e)})()},[]),(0,a.useEffect)(()=>{let e=document.getElementById("gameover");e&&(e.style.opacity="1",e.style.transform="perspective(800px) translateZ(0) scale(1)")},[]),e)?(0,s.jsxs)("div",{id:"gameover",style:{position:"absolute",inset:0,backgroundColor:"#000",opacity:1,transform:"perspective(800px) translateZ(0) scale(1)",transition:"all 2s ease",zIndex:50},className:"min-h-screen flex flex-col items-center justify-center bg-[#0B1120] p-4 font-mono",children:[(0,s.jsx)("div",{className:"bg-[#FF3366]/30 border-4 border-[#FF3366] shadow-heavy rounded-sm w-full max-w-xl py-12 mb-12 flex items-center justify-center",children:(0,s.jsx)("h1",{className:"text-[#FF3366] text-[96px] font-extrabold leading-none",children:"GAME OVER"})}),(0,s.jsxs)("div",{className:"w-full max-w-xl text-center mb-12",children:[(0,s.jsxs)("h2",{className:"text-white text-[40px] font-normal mb-6",children:["Your final score: ",e.score]}),(0,s.jsxs)("div",{className:"space-y-4 text-[#767676] text-sm",children:[(0,s.jsxs)("p",{children:["Phishing Detected: ",e.phishingDetected]}),(0,s.jsxs)("p",{children:["Legitimate Allowed: ",e.legitimateAllowed]}),(0,s.jsxs)("p",{children:["False Positives: ",e.falsePositives]}),(0,s.jsxs)("p",{children:["False Negatives: ",e.falseNegatives]}),(0,s.jsxs)("p",{children:["Average Response Time: ",e.avgResponseTime.toFixed(1),"s"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-row gap-6",children:[(0,s.jsx)(l.default,{href:"/game",children:(0,s.jsx)("button",{className:"bg-[#64FFDA] text-[#0A192F] font-extrabold text-lg py-3 px-8 rounded shadow-md transition-colors hover:bg-[#52E9C2]",children:"PLAY AGAIN"})}),(0,s.jsx)(l.default,{href:"/dashboard",children:(0,s.jsx)("button",{className:"bg-[#FF3366] text-[#0A192F] font-extrabold text-lg py-3 px-8 rounded shadow-md transition-colors hover:bg-[#E52A59]",children:"DASHBOARD"})})]})]}):(0,s.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#0B1120] text-[#5FFBF1] font-mono",children:"Loading..."})}},9585:function(e,t,i){"use strict";i.d(t,{EJ:function(){return u},G8:function(){return d},Io:function(){return m},MA:function(){return g},Ti:function(){return c},hC:function(){return o},sE:function(){return f}});let s="lastGameStats",a="allTimeStats";async function l(){try{var e;let t=await fetch("/api/auth/user");if(!t.ok)return null;let i=await t.json();return(null===(e=i.user)||void 0===e?void 0:e.id)||null}catch(e){return null}}async function n(e){let t=await l();return t?"".concat(e,"_").concat(t):e}async function o(e){let t=await n(s);localStorage.setItem(t,JSON.stringify(e)),await r(e)}async function c(){let e=await n(s),t=localStorage.getItem(e);return t?JSON.parse(t):null}async function r(e){let t=await d(),i={totalGames:t.totalGames+1,falsePositives:t.falsePositives+e.falsePositives,falseNegatives:t.falseNegatives+e.falseNegatives,totalReported:t.totalReported+e.phishingDetected+e.falsePositives,totalResponseTime:t.totalResponseTime+e.avgResponseTime*e.totalEmails,totalDecisions:t.totalDecisions+e.totalEmails,phishingDetected:t.phishingDetected+e.phishingDetected,legitimateAllowed:t.legitimateAllowed+e.legitimateAllowed},s=await n(a);localStorage.setItem(s,JSON.stringify(i))}async function d(){let e=await n(a),t=localStorage.getItem(e);return t?JSON.parse(t):{totalGames:0,falsePositives:0,falseNegatives:0,totalReported:0,totalResponseTime:0,totalDecisions:0,phishingDetected:0,legitimateAllowed:0}}function u(e){if("totalEmails"in e){let t=e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives;if(0===t)return"0%";let i=e.phishingDetected+e.legitimateAllowed;return"".concat((i/t*100).toFixed(1),"%")}{let t=e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives;if(0===t)return"0%";let i=e.phishingDetected+e.legitimateAllowed;return"".concat((i/t*100).toFixed(1),"%")}}function m(e){return"avgResponseTime"in e?"".concat(e.avgResponseTime.toFixed(1),"s"):0===e.totalDecisions?"0.0s":"".concat((e.totalResponseTime/e.totalDecisions).toFixed(1),"s")}async function f(){let e=await n(s),t=await n(a);localStorage.removeItem(e),localStorage.removeItem(t)}async function g(e){let t=await l(),i=t?"_".concat(t):"",s=(e,t)=>{let i=new Blob([e],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");if(void 0!==s.download){let e=URL.createObjectURL(i);s.setAttribute("href",e),s.setAttribute("download",t),s.style.visibility="hidden",document.body.appendChild(s),s.click(),document.body.removeChild(s)}},a=e=>{if(null==e)return"";let t=String(e);return t.includes(",")?'"'.concat(t,'"'):t};if("all-time"===e){let e=await d();s(["Total Games,False Positives,Total Reported,Phishing Detected,Legitimate Allowed,Average Response Time (s),Accuracy (%)",[e.totalGames,e.falsePositives,e.totalReported,e.phishingDetected,e.legitimateAllowed,(e.totalResponseTime/e.totalDecisions).toFixed(1),((e.phishingDetected+e.legitimateAllowed)/e.totalDecisions*100).toFixed(1)].map(a).join(",")].join("\n"),"authenticate_please_all_time".concat(i,".csv"))}else{let e=await c();e&&s(["Score,Total Emails,Phishing Detected,Legitimate Allowed,False Positives,False Negatives,Average Response Time (s),Accuracy (%),End Reason",[e.score,e.totalEmails,e.phishingDetected,e.legitimateAllowed,e.falsePositives,e.falseNegatives,e.avgResponseTime.toFixed(1),((e.phishingDetected+e.legitimateAllowed)/(e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives)*100).toFixed(1),e.endReason.replace(/_/g," ").toUpperCase()].map(a).join(",")].join("\n"),"authenticate_please_last_game".concat(i,".csv"))}}}},function(e){e.O(0,[250,971,69,744],function(){return e(e.s=3568)}),_N_E=e.O()}]);