(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[894],{551:function(e,t,s){Promise.resolve().then(s.bind(s,7641))},8792:function(e,t,s){"use strict";s.d(t,{default:function(){return l.a}});var a=s(5250),l=s.n(a)},7641:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var a=s(3827),l=s(8792),i=s(4090),o=s(9585);let n={score:0,totalEmails:0,phishingDetected:0,legitimateAllowed:0,falsePositives:0,falseNegatives:0,avgResponseTime:0,endReason:"game_over"},r={totalGames:0,falsePositives:0,falseNegatives:0,totalReported:0,totalResponseTime:0,totalDecisions:0,phishingDetected:0,legitimateAllowed:0};function c(){let e;let[t,s]=(0,i.useState)(!0),[c,d]=(0,i.useState)(r),[m,x]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{let[e,t]=await Promise.all([(0,o.G8)(),(0,o.Ti)()]);d(e),x(t||n)})()},[]);let f=async()=>{confirm("Are you sure you want to reset all statistics? This cannot be undone.")&&(await (0,o.sE)(),d(r),x(n))},h=async()=>{await (0,o.MA)(t?"all-time":"last-game")},g=t?c:m||n;if(!g&&t)return(0,a.jsx)("div",{className:"min-h-screen font-mono flex flex-col bg-[#0A192F]",children:(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-[#00FFD1] text-2xl font-extrabold",children:"No statistics available"})})});let u=(e=null,{onMouseEnter:t=>{(e=t.currentTarget).style.transition="transform 0.3s ease",e.style.transform="rotateX(10deg) rotateY(10deg)"},onMouseMove:t=>{if(!e)return;let s=e.getBoundingClientRect(),a=t.clientX-(s.left+s.width/2),l=t.clientY-(s.top+s.height/2),i=a/(s.width/2)*20,o=-(l/(s.height/2)*20);e.style.transform="rotateX(".concat(o,"deg) rotateY(").concat(i,"deg)")},onMouseLeave:t=>{(e=t.currentTarget).style.transition="transform 0.3s ease",e.style.transform="rotateX(0deg) rotateY(0deg)"}});return(0,a.jsxs)("div",{className:"min-h-screen font-mono flex flex-col bg-[#0A192F]",children:[(0,a.jsx)("div",{className:"flex items-start p-4",children:(0,a.jsx)(l.default,{href:"/dashboard",className:"text-[#00FFD1] hover:text-[#00FFD1]/80 text-lg font-bold",children:"Back"})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col items-center justify-center p-4 space-y-8",children:[(0,a.jsx)("div",{className:"bg-[#0B1120] border-4 border-[#112240] shadow-md flex items-center justify-center w-full max-w-xl min-h-[150px]",children:(0,a.jsx)("h2",{className:"text-[#00FFD1] text-5xl font-extrabold",children:"STATISTICS"})}),(0,a.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>s(!0),className:"\n              px-6 py-2 transition-colors font-extrabold text-xl\n              ".concat(t?"text-[#64FFDA]":"text-[#767676] hover:text-[#64FFDA]","\n            "),children:"All-Time"}),(0,a.jsx)("button",{onClick:()=>s(!1),className:"\n              px-6 py-2 transition-colors font-extrabold text-xl\n              ".concat(t?"text-[#767676] hover:text-[#64FFDA]":"text-[#64FFDA]","\n            "),children:"Last Game"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8 w-full max-w-xl",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsx)("div",{style:{perspective:"600px"},children:(0,a.jsxs)("div",{...u,className:"bg-[#0B1120] border-4 border-[#112240] shadow-md aspect-square flex flex-col items-center justify-center p-4",style:{transformStyle:"preserve-3d",transform:"rotateX(0deg) rotateY(0deg)"},children:[(0,a.jsx)("h4",{className:"text-gray-400 mb-2 text-lg",children:"False Positives"}),(0,a.jsx)("p",{className:"text-[#00FFD1] text-3xl font-extrabold",children:g.falsePositives})]})}),(0,a.jsx)("div",{style:{perspective:"600px"},children:(0,a.jsxs)("div",{...u,className:"bg-[#0B1120] border-4 border-[#112240] shadow-md aspect-square flex flex-col items-center justify-center p-4",style:{transformStyle:"preserve-3d",transform:"rotateX(0deg) rotateY(0deg)"},children:[(0,a.jsx)("h4",{className:"text-gray-400 mb-2 text-lg",children:"Avg Time"}),(0,a.jsx)("p",{className:"text-[#00FFD1] text-3xl font-extrabold",children:(0,o.Io)(g)})]})})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,a.jsx)("div",{style:{perspective:"600px"},children:(0,a.jsxs)("div",{...u,className:"bg-[#0B1120] border-4 border-[#112240] shadow-md aspect-square flex flex-col items-center justify-center p-4",style:{transformStyle:"preserve-3d",transform:"rotateX(0deg) rotateY(0deg)"},children:[(0,a.jsx)("h4",{className:"text-gray-400 mb-2 text-lg",children:"Total Reported"}),(0,a.jsx)("p",{className:"text-[#00FFD1] text-3xl font-extrabold",children:t?g.totalReported:g.phishingDetected+g.falsePositives})]})}),(0,a.jsx)("div",{style:{perspective:"600px"},children:(0,a.jsxs)("div",{...u,className:"bg-[#0B1120] border-4 border-[#112240] shadow-md aspect-square flex flex-col items-center justify-center p-4",style:{transformStyle:"preserve-3d",transform:"rotateX(0deg) rotateY(0deg)"},children:[(0,a.jsx)("h4",{className:"text-gray-400 mb-2 text-lg",children:"Accuracy"}),(0,a.jsx)("p",{className:"text-[#00FFD1] text-3xl font-extrabold",children:(0,o.EJ)(g)})]})})]})]}),!t&&m&&(0,a.jsx)("div",{style:{perspective:"600px"},children:(0,a.jsxs)("div",{...u,className:"bg-[#0B1120] border-4 border-[#112240] shadow-md aspect-square flex flex-col items-center justify-center w-full max-w-xl p-4",style:{transformStyle:"preserve-3d",transform:"rotateX(0deg) rotateY(0deg)"},children:[(0,a.jsx)("h3",{className:"text-gray-400 mb-2 text-lg",children:"End Reason"}),(0,a.jsx)("p",{className:"text-[#FF4365] text-2xl font-medium",children:m.endReason.replace(/_/g," ").toUpperCase()})]})}),t&&(0,a.jsx)("div",{style:{perspective:"600px"},children:(0,a.jsxs)("div",{...u,className:"bg-[#0B1120] border-4 border-[#112240] shadow-md aspect-square flex flex-col items-center justify-center w-full max-w-xl p-4",style:{transformStyle:"preserve-3d",transform:"rotateX(0deg) rotateY(0deg)"},children:[(0,a.jsx)("h3",{className:"text-gray-400 mb-2 text-lg",children:"Games Played"}),(0,a.jsxs)("p",{className:"text-[#FF4365] text-2xl font-medium",children:[g.totalGames," phishing simulations completed."]})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-6 w-full max-w-xl",children:[(0,a.jsx)("button",{onClick:h,className:" w-full bg-[#FF3366] text-[#0A192F] font-extrabold text-xl shadow-md py-6 rounded-sm transition-colors hover:bg-[#64FFDA] ",children:"EXPORT STATISTICS (CSV)"}),(0,a.jsx)("button",{onClick:f,className:" w-full bg-[#0A192F] text-white font-extrabold text-xl shadow-md py-6 rounded-sm transition-colors hover:bg-[#0B1321] ",children:"RESET STATISTICS"})]})]})]})}},9585:function(e,t,s){"use strict";s.d(t,{EJ:function(){return m},G8:function(){return d},Io:function(){return x},MA:function(){return h},Ti:function(){return r},hC:function(){return n},sE:function(){return f}});let a="lastGameStats",l="allTimeStats";async function i(){try{var e;let t=await fetch("/api/auth/user");if(!t.ok)return null;let s=await t.json();return(null===(e=s.user)||void 0===e?void 0:e.id)||null}catch(e){return null}}async function o(e){let t=await i();return t?"".concat(e,"_").concat(t):e}async function n(e){let t=await o(a);localStorage.setItem(t,JSON.stringify(e)),await c(e)}async function r(){let e=await o(a),t=localStorage.getItem(e);return t?JSON.parse(t):null}async function c(e){let t=await d(),s={totalGames:t.totalGames+1,falsePositives:t.falsePositives+e.falsePositives,falseNegatives:t.falseNegatives+e.falseNegatives,totalReported:t.totalReported+e.phishingDetected+e.falsePositives,totalResponseTime:t.totalResponseTime+e.avgResponseTime*e.totalEmails,totalDecisions:t.totalDecisions+e.totalEmails,phishingDetected:t.phishingDetected+e.phishingDetected,legitimateAllowed:t.legitimateAllowed+e.legitimateAllowed},a=await o(l);localStorage.setItem(a,JSON.stringify(s))}async function d(){let e=await o(l),t=localStorage.getItem(e);return t?JSON.parse(t):{totalGames:0,falsePositives:0,falseNegatives:0,totalReported:0,totalResponseTime:0,totalDecisions:0,phishingDetected:0,legitimateAllowed:0}}function m(e){if("totalEmails"in e){let t=e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives;if(0===t)return"0%";let s=e.phishingDetected+e.legitimateAllowed;return"".concat((s/t*100).toFixed(1),"%")}{let t=e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives;if(0===t)return"0%";let s=e.phishingDetected+e.legitimateAllowed;return"".concat((s/t*100).toFixed(1),"%")}}function x(e){return"avgResponseTime"in e?"".concat(e.avgResponseTime.toFixed(1),"s"):0===e.totalDecisions?"0.0s":"".concat((e.totalResponseTime/e.totalDecisions).toFixed(1),"s")}async function f(){let e=await o(a),t=await o(l);localStorage.removeItem(e),localStorage.removeItem(t)}async function h(e){let t=await i(),s=t?"_".concat(t):"",a=(e,t)=>{let s=new Blob([e],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a");if(void 0!==a.download){let e=URL.createObjectURL(s);a.setAttribute("href",e),a.setAttribute("download",t),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)}},l=e=>{if(null==e)return"";let t=String(e);return t.includes(",")?'"'.concat(t,'"'):t};if("all-time"===e){let e=await d();a(["Total Games,False Positives,Total Reported,Phishing Detected,Legitimate Allowed,Average Response Time (s),Accuracy (%)",[e.totalGames,e.falsePositives,e.totalReported,e.phishingDetected,e.legitimateAllowed,(e.totalResponseTime/e.totalDecisions).toFixed(1),((e.phishingDetected+e.legitimateAllowed)/e.totalDecisions*100).toFixed(1)].map(l).join(",")].join("\n"),"authenticate_please_all_time".concat(s,".csv"))}else{let e=await r();e&&a(["Score,Total Emails,Phishing Detected,Legitimate Allowed,False Positives,False Negatives,Average Response Time (s),Accuracy (%),End Reason",[e.score,e.totalEmails,e.phishingDetected,e.legitimateAllowed,e.falsePositives,e.falseNegatives,e.avgResponseTime.toFixed(1),((e.phishingDetected+e.legitimateAllowed)/(e.phishingDetected+e.legitimateAllowed+e.falsePositives+e.falseNegatives)*100).toFixed(1),e.endReason.replace(/_/g," ").toUpperCase()].map(l).join(",")].join("\n"),"authenticate_please_last_game".concat(s,".csv"))}}}},function(e){e.O(0,[250,971,69,744],function(){return e(e.s=551)}),_N_E=e.O()}]);